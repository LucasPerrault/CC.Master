<form [formGroup]="formGroup" class="u-displayFlex u-flexDirectionColumn u-flexGrow1">
  <div class="u-displayFlex u-alignItemsCenter u-justifyContentSpaceBetween">
    <cc-date-range-select datesClass="palette-grey mod-outlined mod-inline u-marginBottomSmallest"
                          [configuration]="dateRangeConfiguration"
                          [formControlName]="formKey.CountPeriod">
    </cc-date-range-select>

    <button class="button palette-grey mod-icon mod-outline" (click)="toggleAdditionalFiltersDisplay()">
      <span aria-hidden="true" class="button-icon lucca-icon icon-filterAbstract"></span>
      {{ 'counts_filters_label' | translate }}
      <span class="label mod-number u-animatedScaleIn" *ngIf="!!selectedAdditionalFiltersCount">
        {{ selectedAdditionalFiltersCount }}
      </span>
    </button>
  </div>

  <div *ngIf="showAdditionalFilters" class="u-displayFlex u-alignItemsCenter u-flexWrapWrap">

    <label class="textfield palette-grey mod-outlined mod-inline u-marginTopSmallest">
      <cc-environment-api-select [formControlName]="formKey.Environments" [multiple]="true"
                                 [placeholder]="'front_select_environments_label' | translate">
      </cc-environment-api-select>
    </label>

    <cc-client-api-select [formControlName]="formKey.Clients" [displayMode]="selectMode.Filter" [multiple]="true"
                          textfieldClass="palette-grey mod-outlined mod-inline u-marginTopSmallest">
    </cc-client-api-select>

    <cc-distributor-api-select [formControlName]="formKey.Distributors" [displayMode]="selectMode.Filter"
                               [multiple]="true" textfieldClass="palette-grey mod-outlined mod-inline u-marginTopSmallest">
    </cc-distributor-api-select>

    <label class="textfield palette-grey mod-outlined mod-inline u-marginTopSmallest">
      <cc-offer-api-select [formControlName]="formKey.Offers" [multiple]="true"
                           [placeholder]="'offers_select_label' | translate">
      </cc-offer-api-select>
    </label>

    <label class="textfield palette-grey mod-outlined mod-inline u-marginTopSmallest">
      <cc-environment-group-api-select [formControlName]="formKey.EnvironmentGroups" [multiple]="true"
                                       [filters]="['environmentsnumber=greaterthan,1']"
                                       [placeholder]="'environment_group_select_label' | translate">
      </cc-environment-group-api-select>
    </label>

    <label class="textfield palette-grey mod-outlined mod-inline u-marginTopSmallest">
      <cc-product-api-select [formControlName]="formKey.Products" [multiple]="true"
                             [placeholder]="'select_products_label' | translate">
      </cc-product-api-select>
    </label>

  </div>
</form>
