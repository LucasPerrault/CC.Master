<div class="page mod-fullWidth mod-withFullwidthTable mod-withInfiniteScroll"
     ccInfiniteScroll (bottomReached)="nextPage()">
  <header class="page-header blockWithFixedSizeInFlex">
    <h1>{{ 'demos_title' | translate }}</h1>

    <button class="button" [routerLink]="['create']">{{ 'demos_create_button' | translate }}</button>
  </header>

  <cc-demo-filters class="header blockWithFixedSizeInFlex" [formControl]="filters"></cc-demo-filters>

  <div class="loading mod-fullPage" *ngIf="isLoading$ | async; else isNotLoading"></div>

  <ng-template #isNotLoading>
    <div class="u-paddingStandard">

      <ng-container *ngFor="let duplicationId of duplicationIds$ | async">
        <cc-demo-duplication-card [duplicationId]="duplicationId"></cc-demo-duplication-card>
      </ng-container>

      <cc-demo-card *ngFor="let demo of demos$ | async"
                    [demo]="demo"
                    [templateDemos]="templateDemos$ | async"
                    (delete)="openDeletionModal($event)"
                    (showComment)="openCommentModal($event)"
                    (editComment)="openCommentEditionModal($event)"
                    (editPassword)="openPasswordEditionModal($event)">
      </cc-demo-card>
    </div>

    <div *ngIf="isLoadingMore$ | async" class="loading u-marginLeftStandard u-marginBottomStandard">
      {{ 'demos_loading' | translate }}
    </div>

  </ng-template>
</div>

<router-outlet></router-outlet>
