<ng-container *ngIf="demo$ | async; let demo">
  <div class="card">
    <div class="card-content grid u-marginLeftReset">

      <div class="card-content-left grid-xs6">
        <div class="card-content-left-top">
          <h3 class="u-displayFlex u-alignItemsCenter u-marginBottomSmallest">
            <a class="link mod-text u-marginRightSmaller" (click)="openDemo(demo?.href)">{{ getTitle(demo?.subdomain) }}</a>
          </h3>

          <div class="u-displayFlex u-textSmall">
            <div class="u-marginBottomSmallest u-marginRightSmaller">
              {{ 'demos_card_author_creation' | translate : { name: getAuthorName(demo?.authorId, demo?.author), date: demo?.createdAt | date : 'shortDate' } }}
            </div>
            -
            <div class="u-marginBottomSmallest u-marginLeftSmaller">
              <ng-container *ngIf="shouldExpire(demo); else isNotExpired">
                {{ 'demos_card_expireOn' | translate : { date : demo?.deletionScheduledOn | date : 'shortDate' } }}
              </ng-container>

              <ng-template #isNotExpired>
                <strong *ngIf="demo?.instance?.isProtected">{{ 'demos_card_isProtected' | translate }}</strong>
              </ng-template>
            </div>
          </div>
        </div>

        <div class="card-content-left-bottom" *ngIf="hasPassword">
          <cc-demo-password [demo]="demo"></cc-demo-password>
        </div>
      </div>

      <div class="card-content-right grid-xs6">
        <div class="u-displayFlex u-flexDirectionColumn u-justifyContentCenter u-alignItemsFlexStart u-marginLeftSmall">
          <div class="u-displayFlex u-alignItemsCenter">
            <label class="textfield palette-grey mod-outlined mod-long">
              <cc-demo-instance-user-api-select [instanceId]="demo?.instanceID"
                                                [placeholder]="'demos_card_connect_as' | translate"
                                                [formControl]="formControl">
              </cc-demo-instance-user-api-select>
            </label>
            <span aria-hidden="true" class="lucca-icon icon-info u-marginLeftSmaller u-marginRightSmallest"
                  [luTooltip]="'demos_card_users_example' | translate">
          </span>
          </div>
          <button class="link u-marginTopSmaller" (click)="connectAsMasterKey()">
            {{ 'demos_card_connect_as_master_key' | translate }}
          </button>
        </div>

        <div class="card-content-actions">
          <button *ngIf="!demo?.instance?.isProtected" type="button" class="actionIcon"
                  [luTooltip]="'demos_card_protect' | translate"
                  [ngClass]="protectionButtonClass$ | async" (click)="lock(demo)">
            <span aria-hidden="true" class="lucca-icon icon-unlock"></span>
            <span class="u-mask">{{ 'demos_card_protect' | translate }}</span>
          </button>

          <button *ngIf="demo?.instance?.isProtected" type="button" class="actionIcon"
                  [luTooltip]="'demos_card_unprotect' | translate"
                  [ngClass]="protectionButtonClass$ | async" (click)="unlock(demo)">
            <span aria-hidden="true" class="lucca-icon icon-lock"></span>
            <span class="u-mask">{{ 'demos_card_unprotect' | translate }}</span>
          </button>

          <button type="button" class="actionIcon" [ngClass]="{ 'mod-pushNotification': !!demo.comment }"
                  [luTooltip]="'demos_card_edit_comment' | translate" (click)="editComment.emit(demo)">
            <span aria-hidden="true" class="lucca-icon icon-dialog"></span>
            <span class="u-mask">{{ 'demos_card_edit_comment' | translate }}</span>
            <span class="notification" *ngIf="!!demo?.comment"></span>
          </button>

          <span [luTooltip]="'demos_card_delete_disable' | translate" [luTooltipDisabled]="!demo?.instance?.isProtected">
            <button [disabled]="demo?.instance?.isProtected" type="button" class="actionIcon"
                    [luTooltip]="'demos_card_delete' | translate" (click)="delete.emit(demo)">
              <span aria-hidden="true" class="lucca-icon icon-trash"></span>
              <span class="u-mask">{{ 'demos_card_delete' | translate }}</span>
            </button>
          </span>
        </div>

      </div>
    </div>
  </div>
</ng-container>
